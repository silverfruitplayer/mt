<!DOCTYPE html>
<html>
<head>
  <title>Video Gallery</title>
  <style>
    .thumbnail {
      width: 200px;
      height: 150px;
      margin: 10px;
      display: inline-block;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="gallery"></div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    fetch('videos.json')
      .then(response => response.json())
      .then(data => {
        const gallery = document.getElementById('gallery');

        data.videos.forEach(video => {
          const thumbnail = document.createElement('div');
          thumbnail.className = 'thumbnail';
          thumbnail.style.backgroundImage = `url(${video.thumbnail})`;

          thumbnail.addEventListener('click', () => {
            playVideo(video.url);
          });

          gallery.appendChild(thumbnail);
        });
      })
      .catch(error => {
        console.error('Error loading videos:', error);
      });

    function playVideo(url) {
      const videoElement = document.createElement('video');
      videoElement.controls = true;

      if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(videoElement);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          videoElement.play();
        });
      } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
        videoElement.src = url;
        videoElement.addEventListener('loadedmetadata', () => {
          videoElement.play();
        });
      } else {
        console.error('HLS is not supported');
      }

      const modal = document.createElement('div');
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.width = '100%';
      modal.style.height = '100%';
      modal.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
      modal.style.display = 'flex';
      modal.style.justifyContent = 'center';
      modal.style.alignItems = 'center';

      modal.appendChild(videoElement);
      document.body.appendChild(modal);
    }
  </script>
</body>
</html>

